<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
  <title>Знакомство с Python для камрадов, переросших «язык A vs. язык B» и другие предрассудки / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.c0af73e7.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.85eb77f0b17c8235e7b64b9f81ea5ec2.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" src="/js/ads.js" onload="window['zhY4i4nJ9K'] = true" data-vmid="checkad"></script><script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/post\/450724\/"},"headline":"Знакомство с Python для камрадов, переросших «язык A vs. язык B» и другие предрассудки","datePublished":"2019-05-21T18:01:38+03:00","dateModified":"2019-05-26T11:54:36+03:00","author":{"@type":"Person","name":"Zaur Nasibov"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"Для всех хабравчан, у которых возникло ощущение дежавю: Написать этот пост меня побудили статья &quot;Введение в Python&quot; и комментарии к ней. К сожалению, качество эт...","url":"https:\/\/habr.com\/ru\/post\/450724\/#post-content-body","about":["h_python","h_programming","h_history","f_develop","f_popsci"],"image":["https:\/\/habrastorage.org\/webt\/p_\/8g\/jm\/p_8gjmuqid2ffw7ixile3wkjz74.gif","https:\/\/habrastorage.org\/webt\/l8\/ld\/yz\/l8ldyzcgtvlj3ifvbpnswr2k7ws.png","https:\/\/habrastorage.org\/webt\/rw\/od\/if\/rwodifh_niof7jaf5bvmagg4ypy.gif"]}</script>
  <script src="//www.googletagservices.com/tag/js/gpt.js" async></script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.49.0">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_eng"><meta data-vue-meta="ssr" property="og:title" content="Знакомство с Python для камрадов, переросших «язык A vs. язык B» и другие предрассудки" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="Знакомство с Python для камрадов, переросших «язык A vs. язык B» и другие предрассудки" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="Знакомство с Python для камрадов, переросших «язык A vs. язык B» и другие предрассудки" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="Для всех хабравчан, у которых возникло ощущение дежавю: Написать этот пост меня побудили статья &amp;quot;Введение в Python&amp;quot; и комментарии к ней. К сожалению, качество этого &amp;quot;введения&amp;quot; кхм… не будем о..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="Для всех хабравчан, у которых возникло ощущение дежавю: Написать этот пост меня побудили статья &amp;quot;Введение в Python&amp;quot; и комментарии к ней. К сожалению, качество этого &amp;quot;введения&amp;quot; кхм… не будем о..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="Для всех хабравчан, у которых возникло ощущение дежавю: Написать этот пост меня побудили статья &amp;quot;Введение в Python&amp;quot; и комментарии к ней. К сожалению, качество этого &amp;quot;введения&amp;quot; кхм… не будем о..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="Для всех хабравчан, у которых возникло ощущение дежавю: Написать этот пост меня побудили статья &amp;quot;Введение в Python&amp;quot; и комментарии к ней. К сожалению, качество этого &amp;quot;введения&amp;quot; кхм… не будем о..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="Для всех хабравчан, у которых возникло ощущение дежавю: Написать этот пост меня побудили статья &amp;quot;Введение в Python&amp;quot; и комментарии к ней. К сожалению, качество этого &amp;quot;введения&amp;quot; кхм… не будем о..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habr.com/share/publication/450724/efc5834501a3706637b2bd4e710c9ae1/" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habr.com/share/publication/450724/efc5834501a3706637b2bd4e710c9ae1/" data-vmid="og:image"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habr.com/share/publication/450724/efc5834501a3706637b2bd4e710c9ae1/" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habr.com/share/publication/450724/efc5834501a3706637b2bd4e710c9ae1/" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habr.com/share/publication/450724/efc5834501a3706637b2bd4e710c9ae1/" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="450724" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2019-05-21T15:01:38.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/post/450724/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="https://habr.com/ru/post/450724/" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" data-vmid="hreflang"><link data-vue-meta="ssr" image_src="image" href="https://habr.com/share/publication/450724/efc5834501a3706637b2bd4e710c9ae1/" data-vmid="image:href">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="/manifest.webmanifest"
    rel="manifest"
  >
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#arrow-down"></use></svg></button></div> <!----></div> <a href="/ru/sandbox/start/" class="tm-header__become-author-btn">
            Как стать автором
          </a> <div class="tm-feature tm-header__feature tm-feature_variant-inline"><!----></div> <!----> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!----> <a href="/ru/all/" class="tm-main-menu__item">
        Все потоки
      </a> <a href="/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item tm-header-user-menu__user_desktop"><div class="tm-dropdown"><div class="tm-dropdown__head"><svg height="24" width="24" data-test-id="menu-toggle-guest" class="tm-svg-img tm-header-user-menu__icon"><title>Профиль</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#header-user"></use></svg> <!----></div> <!----></div> <!----></div> <!----></div></div></div></div> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" data-async-called="true" class="tm-page"><div class="tm-page-width"><!----> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#pull-arrow"></use></svg></div></div> <div class="tm-article-presenter"> <div class="tm-article-presenter__body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><div class="tm-article-presenter__header"> <div class="tm-article-snippet tm-article-presenter__snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/BasicWolf/" title="BasicWolf" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="//habrastorage.org/r/w32/getpro/habr/avatars/9b1/0a3/423/9b10a3423277c579d7e66bc831f1e06b.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="/ru/users/BasicWolf/" class="tm-user-info__username">
      BasicWolf
    </a> </span></span> <span class="tm-article-snippet__datetime-published"><time datetime="2019-05-21T15:01:38.000Z" title="2019-05-21, 18:01">21  мая  2019 в 18:01</time></span></div> <!----></div> <h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1"><span>Знакомство с Python для камрадов, переросших «язык A vs. язык B» и другие предрассудки</span></h1> <div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/python/" class="tm-article-snippet__hubs-item-link"><span>Python</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/programming/" class="tm-article-snippet__hubs-item-link"><span>Программирование</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/history/" class="tm-article-snippet__hubs-item-link"><span>История IT</span> <!----></a></span></div> <!----> <!----> <!----></div></div> <!----> <div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-1"><div xmlns="http://www.w3.org/1999/xhtml"><p>Для всех хабравчан, у которых возникло ощущение дежавю: Написать этот пост меня побудили статья <a href="https://habr.com/ru/post/450474/">"Введение в Python"</a> и комментарии к ней. К сожалению, качество этого "введения" кхм… не будем о грустном. Но ещё грустнее было наблюдать склоки в комментариях, из разряда "C++ быстрее Python", "Rust ещё быстрее C++", "Python не нужен" и т.д. Удивительно, что не вспомнили Ruby!</p><br/>
<p>Как сказал Бьярн Страуструп,</p><br/>
<blockquote>«Есть всего два типа языков программирования: те, на которые люди всё время ругаются, и те, которые никто не использует».</blockquote><p>Добро пожаловать под кат всем, кто хотел бы познакомиться с Python, не опускаясь при этом до грязных ругательств!</p><a name="habracut"></a><br/>
<p>Утро в горах Восточного Кавказа ознаменовалось воплями. Два молодых человека сидели на большом валуне и что-то рьяно обсуждали, активно жестикулируя. Через минуту они начали толкать друг друга, а потом сцепились и свалились с валуна в (как оказалось) куст крапивы. Видно этот куст рос там неспроста, — он сразу утихомирил драчунов и внёс перемирие в их неугасающий спор. Как вы, наверное догадались, одним из спорщиков был я, другим — мой лучший друг (привет, Quaker_t!), ну а предметом нашей светской беседы — <strong>Visual Basic vs. Delphi</strong>!</p><br/>
<p>Узнаёте себя? Иногда мы превращаем любимые языки программирования в культ и готовы отстаивать его до последнего! Но годы идут и наступает момент, когда "A vs. B" из предмета споров перерастает в "Мне комфортнее работать с А, но при необходимости я научусь работать с B, C, D, E <em>и вообще, с чем угодно</em>". Вот только когда мы сталкиваемся с новыми языками программирования, старые привычки и культура могут нас долго не отпускать.</p><br/>
<p>Я хотел бы познакомить вас с Питоном и помочь перенести ваш опыт в новое русло. Как у любой технологии, у него есть свои сильные и слабые стороны. Python, как и C++, Rust, Ruby, JS, и все остальные — это инструмент. К любому инструменту прилагается инструкция и любым инструментом надо научиться пользоваться <em>правильно</em>.</p><br/>
<p>"Автор, не пудри мозги, ты собирался нас с Питоном знакомить?". Давайте знакомиться!</p><br/>
<p>Python — динамический, высокоуровневый язык программирования общего назначения. Python — <strong>зрелый</strong> язык программирования с богатой экосистемой и традициями. Хоть язык и увидел свет в 1991-м году, его современный облик начал формироваться в начале 2000-х. Python — <strong>заряженный</strong> язык, в его стандартной библиотеке есть решения на многие случаи жизни. Python — <strong>популярный</strong> язык программирования: Dropbox, Reddit, Instagram, Disqus, YouTube, Netflix, чёрт побери, даже Eve Online и многие другие активно используют Python.</p><br/>
<p>В чём причина такой популярности? С вашего позволения, изложу собственную версию.</p><br/>
<p>Python — <strong>простой</strong> язык программирования. Динамическая типизация. Сборщик мусора. Функции высшего порядка. Простой синтаксис для работы со словарями, множествами, кортежами и списками (в т.ч. для получения срезов). Питон отлично подходит для новичков: даёт возможность начать с процедурного программирования, потихоньку перейти к ООП и почуствовать вкус программирования функционального. Но эта простота — как верхушка айсберга. Стоит нырнуть в глубину, как натыкаешься на философию Питона — <a href="https://www.python.org/dev/peps/pep-0020/">Zen Of Python</a>. Ныряешь ещё дальше — и попадаешь в свод чётких правил по оформлению кода — <a href="https://www.python.org/dev/peps/pep-0008/">Style Guide for Python Code</a>. Погружаясь, программист постепенно вникает в понятие "Python way" или "Pythonic". В этот удивительный этап изучения языка, начинаешь понимать, почему хорошие программы на Питоне пишутся именно так, а не иначе. Почему язык эволюционировал именно в этом направлении, а не в другом. Питон не преуспел в скорости выполнения. Но он преуспел в важнейшем аспекте нашей работы — читабельности. "Пишите код для людей, а не для машины" — это основа из основ Питона.</p><br/>
<p>Хороший код на Питоне выглядит красиво. А писать красивый код — чем не приятное занятие?</p><br/>
<p><strong>Совет 0:</strong> <em>Перед тем как читать дальше, пожалуйста, загляните в уголок <a href="https://www.python.org/dev/peps/pep-0020/">Дзена Питона</a>. Язык зиждется на этих постулатах и наше общение будет намного приятнее, если и вы будете с ними знакомы.</em></p><br/>
<h3 id="kakoy-umnik-dodumalsya-do-otstupov">Какой умник додумался до отступов?</h3><br/>
<p>Первым шоком для тех, кто никогда не видел код на Питоне, является обозначение тела инструкций отступами:</p><br/>
<pre><code class="python">def main():
    ins = input('Please say something')

    for w in ins.split(' '):
        if w == 'hello':
            print('world!')</code></pre><br/>
<p>Вспоминаю вечера в общаге Питерского Политеха, когда мой сосед, <a href="https://habr.com/ru/users/vlk/" class="user_link">VlK</a>, с горящими глазами рассказывал, что ещё нового он откопал в Питоне. "Тело инструкции отступами? Серьёзно?" — была моя реакция. Действительно, для человека прошедшего от Visual Basic (<code>if ... end if</code>) до C# (фигурные скобки), сквозь C, C++ и Java, подобный подход казался, мягко говоря, странным. "Ты же форматируешь код отступами?", спросил <a href="https://habr.com/ru/users/vlk/" class="user_link">VlK</a>. Конечно же я форматировал его. Точнее, за меня это делала спираченная Visual Studio. Она справлялась с этим чертовски хорошо. Я никогда не задумывался о форматировании и отступах — они появлялись в коде сами по себе и казались чем-то обыденным и привычным. Но крыть было нечем — код был всегда отформатирован отступами. "Тогда зачем тебе фигурные скобки, если тело инструкций в любом случае будет сдвинуто вправо?".</p><br/>
<p>В тот вечер я засел за Python. Оглядываясь назад, я могут точно сказать, что́ именно помогало быстро усваивать новый материал. Это был редактор кода. Под влиянием того же <a href="https://habr.com/ru/users/vlk/" class="user_link">VlK</a>, незадолго до вышеописанных событий, я перешёл с Windows на Ubuntu и Emacs в качестве редактора (на дворе 2007й год, до PyCharm, Atom, VS Code и прочих — ещё много лет). "Ну вот, сейчас будет пиарить Emacs..." — скажете вы. Совсем чуточку :) Традиционно, клавиша <code>&lt;tab></code> в Emacs не добавляет символов табуляции, а служит для выравнивания строки по правилам данного режима. Нажал <code>&lt;tab></code> — и строка кода сдвигается в следующее подходящее положение:</p><br/>
<p><img src="/img/image-loader.svg" data-src="https://habrastorage.org/webt/p_/8g/jm/p_8gjmuqid2ffw7ixile3wkjz74.gif"/></p><br/>
<p>Таким образом вам никогда не приходится задумываться, правильно ли вы выровняли код.</p><br/>
<p><strong>Совет 1:</strong> <em>При знакомстве с Python используйте редактор, который возьмёт на себя заботу об отступах.</em></p><br/>
<p>А знаете, какой побочный эффект у всего этого безобразия? Программист старается избегать длинных конструкций. Как только размер функции выходит за вертикальные границы экрана, становится сложнее различать, к какой же конструкции относится данный блок кода. И чем больше вложений, тем сложнее. В результате стараешься писать как можно лаконичнее, разбивая длинные тела функций, циклов, условных переходов и т.д.</p><br/>
<h3 id="da-nu-vashu-dinamicheskuyu-tipizaciyu">Да ну вашу динамическую типизацию</h3><br/>
<p>O, эта дискуссия существует почти столько же, сколько существует само понятие "программирование"! Динамическая типизация не плоха и не хороша. Динамическая типизация — это тоже наш инструмент. В Питоне динамическая типизация даёт огромную свободу действий. А там, где большая свобода действий — больше вероятность выстрелить себе в ногу.</p><br/>
<p>Стоит уточнить, что типизация в Питоне <strong>строгая</strong> и сложить число со строкой не получится:</p><br/>
<pre><code class="python">1 + '1'
>>> TypeError: unsupported operand type(s) for +: 'int' and 'str'</code></pre><br/>
<p>Питон также проверяет сигнатуру функции при вызове и выбросит исключение, если сигнатура вызова не верна:</p><br/>
<pre><code class="python">def sum(x, y):
    return x + y

sum(10, 20, 30)
>>> TypeError: sum() takes 2 positional arguments but 3 were given</code></pre><br/>
<p>Но загружая скрипт, Python не скажет вам, что функция ожидает число а не строку, которую вы в неё передаёте. И узнаете вы об этом лишь во время исполнения:</p><br/>
<pre><code class="python">def sum(x, y):
    return x + y

sum(10, '10')
>>> TypeError: can only concatenate str (not "int") to str</code></pre><br/>
<p>Тем сильнее вызов программисту, <em>особенно при написании больших проектов</em>. Современный Питон ответил на этот вызов механизмом аннотаций и библиотекой типов, а сообщество разработало программы, <a href="http://mypy-lang.org/">выполняющие статическую проверку типов</a>. В результате программист узнаёт о подобных ошибках до выполнения программы:</p><br/>
<pre><code class="python"># main.py:
def sum(x: int, y: int) -> int:
    return x + y

sum(10, '10')

$ mypy main.py
tmp.py:5: error: Argument 2 to "sum" has incompatible type "str"; expected "int"</code></pre><br/>
<p>Питон не придаёт никакого значения аннотациям, хотя и сохраняет их в атрибуте <code>__annotations__</code>. Единственное условие — аннотации должны быть валидными значениями с точки зрения языка. С момента их появления в версии 3.0 (что было более десяти лет назад!), именно усилиями сообщества, аннотации стали использовать для типизированной маркировки переменных и аргументов.</p><br/>
<div class="spoiler"><b class="spoiler_title">Ещё один пример, посложнее.</b><div class="spoiler_text"><pre><code class="python"># Для тех кто очень в теме, напоминаю: это пример :)

from typing import TypeVar, Iterable

Num = TypeVar('Num', int, float)

def sum(items: Iterable[Num]) -> Num:
    accum = 0
    for item in items:
        accum += item
    return accum

sum([1, 2, 3])
>>> 6</code></pre></div></div><br/>
<p><strong>Совет 2:</strong> <em>На практике больше всего динамическая типизация вызывает проблемы при чтении и отладке кода. Особенно если этот код писался без аннотаций и вам приходится тратить много времени на выяснение типов переменных. Вам не обязательно указывать и документировать типы всего и вся, но время, потраченное на детальное описание публичных интерфейсов и наиболее критических участков кода, воздастся сторицей!</em></p><br/>
<h3 id="krya-utinaya-tipizaciya">Кря! Утиная типизация</h3><br/>
<p>Порой знатоки Питона напускают на себя таинственный вид и говорят об "Утиной типизации".<br/>
Утиная типизация (Duck typing) — это применение "утиного теста" в программировании:</p><br/>
<blockquote>Если объект крякает как утка, летает как утка и ходит как утка, то скорее всего это утка.</blockquote><p>Рассмотрим пример:</p><br/>
<pre><code class="python">class RpgCharacter:
    def __init__(self, weapon)
        self.weapon = weapon

    def battle(self):
        self.weapon.attack()</code></pre><br/>
<p>Тут — классическое внедрение зависимости (dependency injection). Класс <code>RpgCharacter</code> получает объект <code>weapon</code> в конструкторе и позже, в методе <code>battle()</code> вызывает <code>weapon.attack()</code>. Но <code>RpgCharacter</code> не зависит от конкретной имплементации <code>weapon</code>. Это может быть меч, BFG 9000, или кит с цветочным горшком, готовые приземлиться неприятелю на голову в любой момент. Важно, чтобы у объекта был метод <code>attack()</code>, всё остальное Питон не интересует.</p><br/>
<p><a href="https://chandniblogs.wordpress.com/2017/04/21/454/"><div style="text-align:center;"><img src="/img/image-loader.svg" data-src="https://habrastorage.org/webt/l8/ld/yz/l8ldyzcgtvlj3ifvbpnswr2k7ws.png" data-width="400"/></div></a></p><br/>
<p>Строго говоря, утиная типизация не является чем-то уникальным. Она присутствует во всех (знакомых мне) динамических языках, реализующих ООП.</p><br/>
<p>Это ещё один пример того, как внимательно приходится программировать в мире динамической типизации. Плохо назвали метод? Неоднозначно нарекли переменную? Ваш коллега, или вы сами, спустя эдак пол-годика, будете счастливы разгребать подобный код :)</p><br/>
<div class="spoiler"><b class="spoiler_title">Что было бы, используй мы условную Java?</b><div class="spoiler_text"><pre><code class="java">interface IWeapon {
    void attack();
}

public class Sword implements IWeapon {
    public void attack() {
        //...
    }
}

public class RpgCharacter {
    IWeapon weapon;

    public RpgCharacter(IWeapon weapon) {
       this.weapon = weapon;
    }

    public void battle() {
        weapon.attack();
    }
}</code></pre><br/>
<p>А была бы классическая статическая типизация, с проверкой соответствия типам на стадии компиляции. Цена — невозможность использовать объект, имеющий метод <code>attack()</code>, но при этом не реализующий интерфейс <code>IWeapon</code> явным образом.</p></div></div><br/>
<p><strong>Совет 3</strong>: <em>При желании вы можете описать интерфейс, построив собственный <a href="https://docs.python.org/3/library/abc.html">абстрактный класс с методами и свойствами</a>. А ещё лучше будет потратить время на тщательное тестирование и написание документации для себя и пользователей вашего кода.</em></p><br/>
<h3 id="procedurnyy-podhod-i-__specialnye_metody__">Процедурный подход и __специальные_методы__()</h3><br/>
<p>Питон — объектно-ориентированный язык и в корне иерархии наследования стоит класс <code>object</code>:</p><br/>
<pre><code class="python">isinstance('abc', object)
>>> True

isinstance(10, object)
>>> True</code></pre><br/>
<p>Но там где в Java и C# используется <code>obj.ToString()</code>, в Питоне будет вызов функции <code>str(obj)</code>. Или например вместо <code>myList.length</code>, в Питоне будет <code>len(my_list)</code>. Создатель языка, Гвидо Ван Россум (Guido van Rossum), объяснил это следующим образом:</p><br/>
<blockquote>Когда я читаю код в котором говорится <code>len(x)</code>, то знаю, что запрашивается длина чего-то. Это сразу говорит мне о том, что результатом будет целое число, а аргументом — какой-то контейнер. И наоборот, читая <code>x.len()</code>, мне необходимо знать, что <code>x</code> — это какой-то контейнер, имплементирующий определённый интерфейс или наследующий от класса, в котором имеется метод <code>len()</code>. <a href="http://effbot.org/pyfaq/why-does-python-use-methods-for-some-functionality-e-g-list-index-but-functions-for-other-e-g-len-list.htm">[Источник]</a>.</blockquote><p>Тем не менее внутри себя функции <code>len()</code>, <code>str()</code> и некоторые другие будут вызывать <strong>определённые</strong> методы объекта:</p><br/>
<pre><code class="python">class User:
    def __init__(self, name, last_name):
        self.name = name
        self.last_name = last_name

    def __str__(self):
        return f"Honourable {self.name} {self.last_name}"

u = User('Alex', 'Black')
label = str(u)
print(label)
>>> Honourable Alex Black</code></pre><br/>
<p>Специальные методы также используются операторами языка, как математическими и булевыми, так и операторами цикла <code>for ... in ...</code>, оператором контекста <code>with</code>, оператором индекса <code>[]</code> и т.д.<br/>
Например, протокол итератора состоит из двух методов: <code>__iter__()</code> и <code>__next__()</code>:</p><br/>
<pre><code class="python"># Никаких Iterable, IEnumerable, std::iterator и т.д.
class InfinitePositiveIntegers:
    def __init__(self):
        self.counter = 0

    def __iter__(self):
        """Возвращает объект по которому будет проводиться итерация.

        Вызывается встроенной фунцкией iter().
        """
        return self

    def __next__(self):
        """Возвращает элементы итерации.

        Вызывается встроенной фунцкией next().
        """
        self.counter += 1
        return self.counter

for i in InfinitePositiveIntegers():
    print(i)
>>> 1
>>> 2
>>> ...
# чтобы остановить, нажмите Ctrl + C</code></pre><br/>
<p>Хорошо, допустим специальные методы. Но почему они выглядят так вырвиглазно? Гвидо объяснил это тем, что имей они обычные имена без подчёркиваний, программисты, сами того не хотя, рано или поздно переопределяли бы их. Т.е. <code>__метод__()</code> это своебразная защита от дурака. Как показало время — защита эффективная :)</p><br/>
<p><strong>Совет 4:</strong> <em>Внимательно ознакомьтесь со <a href="https://docs.python.org/3/library/functions.html">встроенными функциями</a> и <a href="https://docs.python.org/3/reference/datamodel.html#special-method-names">специальными методами объектов</a>. Они являются неотъемлимой частью языка, без которой невозможно полноценно на нём разговаривать.</em></p><br/>
<h3 id="gde-inkapsulyaciya-gde-moy-private-gde-moya-skazochka">Где инкапсуляция? Где мой private?! Где моя сказочка?!!</h3><br/>
<p>В Питоне нет модификаторов доступа к атрибутам класса. Внутренности объектов открыты для доступа без каких-либо ограничений. Однако существует конвенция, по которой атрибуты с префиксом <code>_</code> считаются приватными, например:</p><br/>
<pre><code class="python">import os

class MyFile:
    # Поле считается приватным
    _os_handle = None

    def __init__(self, path: str):
        self._open(path)

    # Метод считается приватным
    def _open(self, path):
        # os.open() - *низкоуровневая* функция для открытия файлов.
        # На практике используется встроенная функция open().
        # Нам же os.open() отлично подойдёт для примера.
        self._os_handle = os.open(path, os.O_RDWR | os.O_CREAT)

    # А этот метод считается публичным
    def close(self):
        if self._os_handle is not None:
            os.close(self._os_handle)

f = MyFile('/tmp/file.txt')
print(f._os_handle) # с доступом к "приватному" полю нет никаких проблем!
f.close()</code></pre><br/>
<p>Почему?</p><br/>
<blockquote>В Питоне нет ничего приватного. Ни класс, ни его экземпляр не скроют от тебя того, что лежит внутри (благодаря чему возможна глубочайшая интроспекция). Питон доверяет тебе. Он как бы говорит "Приятель, если ты хочешь пошарить по тёмным углам — нет проблем. Я верю, что на то имеются хорошие причины и надеюсь, что ты ничего не сломаешь.<br/>
<br/>
В конце концов мы все здесь взрослые люди.<br/>
<br/>
 — Karl Fast <a href="https://mail.python.org/pipermail/tutor/2003-October/025932.html">[Источник]</a>.</blockquote><br/>
<div class="spoiler"><b class="spoiler_title">А как же избежать коллизии имён при наследовании?</b><div class="spoiler_text"><p>В Питоне есть специальный механизм искажения (mangling) имени атрибутов, начинающихся с двойного подчёркивания и не заканчивающихся на двойное подчёркивание (<code>__my_attr</code>)! Сделано это для избежания коллизий имён при наследовании. Для вызова вне тела методов класса, Питон добавляет префикс <code>_ИмяКласса__атрибут</code>. Но для внутреннего доступа ничего не меняется:</p><br/>
<pre><code class="python">class C:
    def __init__(self):
        self.__x = 10

    def get_x(self):
        return self.__x

c = C()
c.__x
>>> 'C' object has no attribute '__x'

print(c.get_x())
>>> 10

print(c._C__x)
>>> 10</code></pre><br/>
<p>Давайте рассмотрим практическое применение. Например, классу <code>File</code>, который читает файлы из локальной файловой системы, мы хотим добавить способности кеширования. Наш коллега успел написать для этих целей класс-миксин. Но чтобы отгородить методы и атрибуты от <strong>потенциальных</strong> коллизий, коллега добавил к их именам префикс <code>__</code>:</p><br/>
<pre><code class="python">class BaseFile:
    def __init__(self, path):
        self.path = path

class LocalMixin:
    def read_from_local(self):
        with open(self.path) as f:
            return f.read()

class CachedMixin:
    class CacheMissError(Exception):
        pass

    def __init__(self):
        # Tepeрь, даже если в соседнем классе в цепочке наследования
        # будет атрибут __cache, или метод __from_cache(),
        # коллизии, а точнее переопределения не произойдёт!
        self.__cache = {}

    def __from_cache(self):
        return self.__cache[self.path]

    def read_from_cache(self):
        try:
            return self.__from_cache()
        except KeyError as e:
            raise self.CacheMissError() from e

    def store_to_cache(self, data):
        self.__cache[self.path] = data

class File(CachedMixin, LocalMixin, BaseFile):
    def __init__(self, path):
        CachedMixin.__init__(self)
        BaseFile.__init__(self, path)

    def read(self):
        try:
            return self.read_from_cache()
        except CachedMixin.CacheMissError:
            data = self.read_from_local()
            self.store_to_cache(data)
            return data</code></pre><br/>
<p>Если вам интересно взглянуть на имплементацию этого механизма в CPython, прошу в <a href="https://github.com/python/cpython/blob/9a4135e939bc223f592045a38e0f927ba170da32/Python/compile.c#L219">Python/compile.c</a></p></div></div><br/>
<p>Наконец, благодаря наличию свойств (properties) в языке, теряется смысл писать геттеры и сеттеры в стиле Java: <code>getX(), setX()</code>. Например, в изначально написанном классе <code>Coordinates</code>,</p><br/>
<pre><code class="python">class Coordinates:
    def __init__(self, x, y):
        self.x = x
        self.y = y

c = Coordinates(10, 10)
print(c.x, c.y)
>>> (10, 10)</code></pre><br/>
<p>понадобилось управлять доступом к атрибуту <code>x</code>. Правильным подходом будет заменить его на <code>property</code>, тем самым сохраняя контракт с внешним миром.</p><br/>
<pre><code class="python">class Coordinates:
    _x = 0

    def __init__(self, x, y):
        self.x = x
        self.y = y

    @property
    def x(self):
        return self._x

    @x.setter
    def x(self, val):
        if val > 10:
            self._x = val
        else:
            raise ValueError('x should be greater than 10')

c = Coordinates(20, 10)
c.x = 5
>>> ValueError: x should be greater than 10</code></pre><br/>
<p><strong>Совет 5:</strong> <em>Как и многое в Питоне, понятие о приватных полях и методах класса опирается на устоявшуюся конвенцию. Не обижайтесь на авторов библиотек, если "всё перестало работать" по той причите, что вы активно пользовались приватными полями их классов. В конце концов, мы все здесь взрослые люди :)</em>.</p><br/>
<h3 id="nemnogo-ob-isklyucheniyah">Немного об исключениях</h3><br/>
<p>В культуре Питона своеобразный подход к исключениям. Кроме привычного перехвата и обработки а-ля C++ / Java, вам придётся столкнуться с использованием исключений в контексте</p><br/>
<blockquote>"Проще попросить прощения, чем спрашивать разрешение" (Easier to ask for forgiveness, than permission — EAFP).</blockquote><p>Перефразируя — не пиши лишнего <code>if</code>, если в большинстве случаев исполнение пойдёт по данной ветке. Вместо этого оберни логику в <code>try..except</code>.</p><br/>
<p>Пример: представим обработчик POST-запросов, создающей пользователя в условной базе данных. На входе функции — словарь (dictionary) типа ключ-значение:</p><br/>
<pre><code class="python">def create_user_handler(data: Dict[str, str]):
    try:
        database.user.persist(
            username=data['username'],
            password=data['password']
        )
    except KeyError:
        print('There was a missing field in data passed for user creation')</code></pre><br/>
<p>Мы не стали загрязнять код проверками "содержится ли <code>username</code> или <code>password</code> в <code>data</code>". Мы ожидаем, что скорее всего они там будут. Мы не просим "разрешения" пользоваться этими полями, но "просим прощения" когда очередной кулхацкер запостит форму с отсутствующими данными.</p><br/>
<div class="spoiler"><b class="spoiler_title">Только не доводите это до абсурда!</b><div class="spoiler_text"><p>Например, вам хочется проверить, присутствуют ли фамилия пользователя в данных и при отсутствии установить её в пустое значение. <code>if</code> здесь будет куда уместнее:</p><br/>
<pre><code class="python">def create_user_handler(data):
    if 'last_name' not in data:
        data['last_name'] = ''

    try:
        database.user.persist(
            username=data['username'],
            password=data['password'],
            last_name=data['last_name']
        )
    except KeyError:
        print('There was a missing field in data passed for user creation')</code></pre></div></div><br/>
<p><strong>Errors should never pass silently.</strong> — не замалчивайте исключения! У современного Питона есть замечательная консткрукция <code>raise from</code>, позволяющая сохранить контекст цепочки исключений. Например:</p><br/>
<pre><code class="python">class MyProductError(Exception):
    def __init__(self):
        super().__init__('There has been a terrible product error')

def calculate(x):
    try:
        return 10 / x
    except ZeroDivisionError as e:
        raise MyProductError() from e</code></pre><br/>
<p>Без <code>raise from e</code> цепочка исключений обрывается на <code>MyProductError</code>, и мы не сможем узнать, что именно было причиной этой ошибки. С <code>raise from X</code>, причина (т.е. <code>X</code>) выбрасываемого исключения сохраняется в атрибуте <code>__cause__</code>:</p><br/>
<pre><code class="python">try:
    calculate(0)
except MyProductError as e:
    print(e.__cause__)

>>> division by zero</code></pre><br/>
<div class="spoiler"><b class="spoiler_title">Но есть маленький нюанс в случае с итерацией: StopIteration</b><div class="spoiler_text"><p>В случае с итерацией, выкидывание исключения <a href="https://docs.python.org/3/library/stdtypes.html#iterator.__next__">StopIteration</a> является официальным способом сигнализировать о завершении итератора.</p><br/>
<pre><code class="python">class PositiveIntegers:
    def __init__(self, limit):
        self.counter = 0
        self.limit = limit

    def __iter__(self):
        return self

    def __next__(self):
        self.counter += 1

        if self.counter == self.limit:
            # никаких hasNext() или moveNext(),
            # только исключения, только хардкор
            raise StopIteration()

        return self.counter

for i in PositiveIntegers(5):
    print(i)
> 1
> 2
> 3
> 4</code></pre></div></div><br/>
<p><strong>Совет 6:</strong> <em>Мы платим за обработку исключения, лишь в исключительных ситуациях. Не пренебрегайте ими!</em></p><br/>
<h3 id="there-should-be-one---and-preferably-only-one---obvious-way-to-do-it">There should be one-- and preferably only one --obvious way to do it.</h3><br/>
<p><code>switch</code> или pattern matching? — используйте <code>if</code> и словари. <code>do-циклы</code>? — для этого есть <code>while</code> и <code>for</code>. <code>goto</code>? Думаю вы и сами догадались. Это же относится и к некоторым техникам и шаблонам проектирования, которые кажутся сами собой разумеющимися в других языках. Самое удивительное, что нет никаких технических ограничений на их реализацию, просто "у нас так не принято".</p><br/>
<p>Например, в Питоне не часто встретишь паттерн "Builder". Вместо него используется возможность передавать и явным образом запрашивать именные аргументы функции. Вместо</p><br/>
<pre><code class="python">human = HumanBuilder.withName("Alex").withLastName("Black").ofAge(20).withHobbies(['tennis', 'programming']).build()</code></pre><br/>
<p>будет</p><br/>
<pre><code class="python">human = Human(
    name="Alex"
    last_name="Black"
    age=20
    hobbies=['tennis', 'programming']
)</code></pre><br/>
<p>В стандартной библиотеке не используются цепочки методов для работы с <em>коллекциями</em>. Помню, как коллега, пришедший из мира Kotlin, показывал мне код следующего толка (взято из <a href="https://kotlinlang.org/docs/tutorials/kotlin-for-py/functional-programming.html">официальной документации</a> по Котлину):</p><br/>
<pre><code class="kotlin">val shortGreetings = people
    .filter { it.name.length &lt; 10 }
    .map { "Hello, ${it.name}!" }</code></pre><br/>
<p>В Питоне <code>map()</code>, <code>filter()</code> и <a href="https://docs.python.org/3/library/itertools.html">многие другие</a> — функции, а не методы коллекций. Переписав этот код один в один получится:</p><br/>
<pre><code class="python">short_greetings = map(lambda h: f"Hello, {h.name}", filter(lambda h: len(h.name) &lt; 10, people))</code></pre><br/>
<p>По-моему выглядит ужасно. Поэтому для длинных связок вроде <code>.takewhile().filter().map().reduce()</code> лучше использовать т.н. <em>включения</em> (comprehensions), или старые добрые циклы. Кстати, этот же пример на Котлине, приводится в виде соответствующего list comprehension. А на Питоне это выглядит так:</p><br/>
<pre><code class="python">short_greetings = [
    f"Hello {h.name}"
    for h in people
    if len(h.name) &lt; 10
]</code></pre><br/>
<div class="spoiler"><b class="spoiler_title">Для тех же, кто скучает по цепочкам</b><div class="spoiler_text"><p>Есть библиотеки, такие как <a href="https://pypi.org/project/pipe/">Pipe</a> или <a href="https://pypi.org/project/py_linq/">py_linq</a>!</p></div></div><br/>
<p>Цепочки методов используются там, где они эффективнee стандартных средств. Например в web-фреймворке Django, цепочки используются для построение объекта-запроса к БД:</p><br/>
<pre><code class="python">query = User.objects \
    .filter(last_visited__gte='2019-05-01') \
    .order_by('username') \
    .values('username', 'last_visited') \
    [:5]</code></pre><br/>
<p><strong>Совет 7:</strong> <em>Перед тем, как сделать что-то очень знакомое из прошлого опыта, но не знакомое в Питоне, спросите себя, какое бы решение принял опытный питонист?</em></p><br/>
<h3 id="piton-medlennyy">Питон медленный</h3><br/>
<p>Да.</p><br/>
<p>Да, если речь идёт о скорости исполнения по сравнению с статически типизированными и компилируемыми языками.</p><br/>
<p>Но вы, похоже, желаете развёрнутого ответа?</p><br/>
<p>Референсная имплементация Питона (CPython) — далеко не самая его эффективная имплементация. Одна из важных причин — желание разработчиков не усложнять её. И логика вполне понятна — не слишком заумный код означает меньше ошибок, лучшую возможность внесения изменений и в конце концов, большее число людей, которые этот код захотят прочесть, понять и дополнить.</p><br/>
<p>Jake VanderPlas в своём блоге разбирает, <a href="https://jakevdp.github.io/blog/2014/05/09/why-python-is-slow/">что происходит у CPython под капотом</a> при сложении двух переменных, содержащих целочисленные значения:</p><br/>
<pre><code class="python">a = 1
b = 2
c = a + b</code></pre><br/>
<p>Даже если не углубляться в дебри CPython, можно сказать, что для хранения переменных <code>a</code>, <code>b</code> и <code>c</code>, интерпретатору придётся создать три объекта в куче (heap), в которых будут храниться тип и (указатели на) значения; повторно выяснять тип и значения при операции сложения, чтобы вызвать что-то вроде <code>binary_add&lt;int, int>(a->val, b->val)</code>; записать результат в <code>c</code>.<br/>
Это чудовищно неэффективно по сравнению с аналогичной программой на C.</p><br/>
<p>Другая беда CPython — это т.н. Global Interpreter Lock (GIL). Этот механизм, по сути — булевое значение, огороженное мьютексом, используется для синхронизации выполнения байткода. GIL упрощает разработку кода, работающего в многопоточной среде: CPython не надо думать о синхронизации доступа к переменным или о взаимных блокировках (deadlocks). За это приходится платить тем, что лишь один поток получает доступ и <em>выполняет байткод</em> в данный момент времени:</p><br/>
<div style="text-align:center;"><img src="/img/image-loader.svg" data-src="https://habrastorage.org/webt/rw/od/if/rwodifh_niof7jaf5bvmagg4ypy.gif"/></div><br/>
<p><strong>UPD: </strong> Но это не значит, что программа на Питоне волшебным образом заработает в многопоточной среде! Код на Питоне не переносится в байткод один в один и нет никаких гарантий о совместимости байткода между версиями! Поэтому синхронизировать потоки в коде вам всё-таки придётся. К счастью и тут у Питона имеется богатый набор средств, например, позволяющих переключаться между многопоточной и многопроцессной моделью выполнения.</p><br/>
<div class="spoiler"><b class="spoiler_title">Если вам интересно, какие попытки предпринимаются для искоренения GIL</b><div class="spoiler_text"><p>Рекомендую прочесть статью Anthony Shaw "<a href="https://hackernoon.com/has-the-python-gil-been-slain-9440d28fa93d">Has the Python GIL been slain?</a>".</p></div></div><br/>
<p>Каковы выходы из ситуации?</p><br/>
<ol>
<li>Питон отлично взаимодействует с нативными библиотеками. В простейшем варианте (<a href="https://cffi.readthedocs.io/en/latest/">CFFI</a>) нужно описать источник и сигнатуру функции в Питоне и вызывать её из динамической библиотеки. Для полноценной же работы с интерпретатором и окружением Питон предоставляет API для написания расширений (extensions) на C/C++. А порывшись в Гугле, можно найти реализацию расширений на Rust, Go и даже <a href="https://github.com/JetBrains/kotlin-native/tree/master/samples/python_extension">Kotlin Native</a>!</li>
<li>Использовать альтернативную реализацию Питона, например:<br/>
<ul>
<li><a href="https://pypy.org">PyPy</a>, со встроенным JIT-компилятором. Прирост скорости будет меньше, чем при использовании нативного расширения, но может в конкретном случае большего и не будет нужно?</li>
<li><a href="https://cython.org">Cython</a> — транспайлер и компилятор надмножества языка Python в код на C.</li>
<li><a href="https://ironpython.net">IronPython</a> — имплементация, работающая поверх .NET framework.</li>
</ul></li>
</ol><br/>
<p><strong>Совет 8:</strong> <em>Если вам априори важна скорость выполнения, эффективнее будет использовать Питон как связку между нативными компонентами и не пытаться впихнуть невпихуемое. Если же вы работаете над приложением, в котором IO (сеть, БД, файловая система) является узким местом, то к тому моменту, когда скорость Питона перестанет вас устраивать, вы точно будете знать, как решить эту проблему :)</em></p><br/>
<h3 id="osnovnye-instrumenty">Основные инструменты</h3><br/>
<p>Как начинаются первые шаги в Питоне? Если у вас под рукой Linux или MacOS, то в 95% случаев Питон будет установлен из коробки. Если вы живёте на острие прогресса, то скорее всего это версия 3.х, а не отживающая свой век версия 2.7. Для товарищей на Windows всё чуточку сложнее. Вот несколько вариантов: использовать Docker, Windows Subsystem for Linux, Cygwin, наконец, официальный инсталлятор Питона для Винды.</p><br/>
<p><strong>Совет 9:</strong> <em>По возможности пользуйтесь свежей версией Питона. Язык развивается, каждая версия — это работа над ошибками и всегда что-то новое и полезное.</em></p><br/>
<p>Вы уже написали "Hello world" и он работает? Превосходно! Через пару дней вы займётесь machine learning-ом и вам понадобится какая-нибудь библиотека из каталога <a href="https://pypi.org">Python Package Index</a> (PyPI).</p><br/>
<p>Чтобы избежать конфликтов версий при установке пакетов (packages), в Питоне используются т.н. виртуальные окружения (virtual environments). Они позволяют частично изолировать среду путём создания директории, в которой будут находиться установленные пакеты. Там же будут лежать шелл-скрипты для управления этой средой. Установщик пакетов <code>pip</code> также идёт в комплекте. При активированной виртуальной среде <code>pip</code> будет устанавливать пакеты именно в неё. А объединяет всё это такие утилиты, как <code>pipenv</code> или <code>poetry</code> — аналоги npm, bundler, cargo и т.п.</p><br/>
<p><strong>Совет 0xA:</strong> <em>Ваши главные помощники для управления зависимостями — это <code>pip</code> и <code>virtualenv</code>. Всё остальное — это удобные, красивые, высокоуровневые обёртки. Ведь всё, что нужно нам и Питону — это правильный <code>sys.path</code> — список директорий, по которым пойдёт поиск модулей при их импорте.</em></p><br/>
<h3 id="chto-zhe-dalshe">Что же дальше?</h3><br/>
<p>Вы уже прочли <a href="https://docs.python.org/3/tutorial/">официальный туториал</a>? Тогда не поленитесь взглянуть и на <a href="https://docs.python-guide.org/dev/virtualenvs/">туториал по вышеописанным инструментам</a>. И как в небезызвестной копипасте: </p><br/>
<blockquote>Завтра ищешь в интернете книжку Dive into python...</blockquote><p>Уверен, что у вас скопилась гора идей и чешутся руки взяться за новый проект на Питоне. Ведь редкий день проходит на Хабре без появления статьи о применении Питона там где, казалось, ему совсем не место :)</p><br/>
<p>Дерзайте, камрады!</p></div></div> <!----> <!----></div> <div class="tm-article-presenter__meta"><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Теги:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bpython%5D" class="tm-tags-list__link">python</a></li></ul></div> <div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Хабы:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/hub/python/" class="tm-hubs-list__link">
    Python
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/programming/" class="tm-hubs-list__link">
    Программирование
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/history/" class="tm-hubs-list__link">
    История IT
  </a></li></ul></div></div></article></div> <!----></div> <div class="tm-article-sticky-panel"><div class="tm-data-icons tm-article-sticky-panel__icons"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_medium"><title>Всего голосов 88: ↑83 и ↓5</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-rating"></use></svg> <span title="Всего голосов 88: ↑83 и ↓5" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_medium">+78</span></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">39K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    338
  </span></button> <!----> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> </div></div> <!----> <!----> <div class="tm-article-presenter__footer"><div class="tm-article-blocks"><!----> <section class="tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body tm-block__body_variant-balanced"><div class="tm-article-author"> <div class="tm-user-card tm-article-author__user-card tm-user-card_variant-article"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="/ru/users/BasicWolf/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><img alt="" src="//habrastorage.org/getpro/habr/avatars/9b1/0a3/423/9b10a3423277c579d7e66bc831f1e06b.jpg" class="tm-entity-image__pic"></div></a> <div class="tm-user-card__meta"><div title=" 105 голосов " class="tm-karma tm-user-card__karma"><div class="tm-karma__votes tm-karma__votes_positive">
    68
  </div> <div class="tm-karma__text">
    Карма
  </div></div> <div title="Рейтинг пользователя" class="tm-rating tm-user-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">0</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div></div></div> <div class="tm-user-card__info tm-user-card__info_variant-article"><div class="tm-user-card__title tm-user-card__title_variant-article"><span class="tm-user-card__name tm-user-card__name_variant-article">Zaur Nasibov</span> <a href="/ru/users/BasicWolf/" class="tm-user-card__nickname tm-user-card__nickname_variant-article">
          @BasicWolf
        </a> <!----></div> <p class="tm-user-card__short-info tm-user-card__short-info_variant-article">Software Engineer</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons_variant-article"><!----> <!----> <!----> <!----> <!----></div></div> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----></section> <div class="tm-article-blocks__comments"><div class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="/ru/post/450724/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментарии 145 
    </span></a> <!----></div></div></div> <div class="tm-ad-banner__container tm-page-article__banner"><!----> <div id="articleBottomBanner" class="tm-ad-banner"></div></div> <!----> <!----> <!----> <!----> </div></div></div></div></div> <div class="tm-page__sidebar"><div class="tm-layout-sidebar"><div class="tm-layout-sidebar__ads tm-layout-sidebar__ads_initial"><div class="tm-ad-banner__container tm-layout-sidebar__banner"><!----> <div id="sidebarBanner" class="tm-ad-banner"></div></div></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;"><!----> <!----></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Ваш аккаунт
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/post/450724/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/post/450724/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Разделы
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/" class="footer-menu__item-link router-link-active">
                Публикации
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/companies/" class="footer-menu__item-link">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Информация
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Услуги
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQLwRfQmXibiUlWaRg-BAc38s7oM3lJiaPju7qmdJsp8ysIvZ_G-Npem0njJLMozE2bPHMpDqiI5hhy/pub?start=false&amp;loop=false&amp;delayms=60000&amp;slide=id.g91a03369cd_4_297" target="_blank">
                Реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habrastorage.org/storage/stuff/habr/service_price.pdf" target="_blank">
                Тарифы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQJJds8-Di7BQSP_guHxICN7woVYoN5NP_22ra-BIo4bqnTT9FR6fB-Ku2P0AoRpX0Ds-LRkDeAoD8F/pub?start=false&amp;loop=false&amp;delayms=60000" target="_blank">
                Контент
              </a></li><li class="tm-footer-menu__list-item"><a href="https://tmtm.timepad.ru/" target="_blank">
                Семинары
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/megaprojects/" class="footer-menu__item-link">
                Мегапроекты
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="/ru/about" class="tm-footer__link">
        О сайте
      </a> <a href="/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <!----> <a href="/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2021 </span> <span class="tm-copyright__name">«<a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a>»</span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"450724":{"id":"450724","timePublished":"2019-05-21T15:01:38+00:00","isCorporative":false,"lang":"ru","titleHtml":"Знакомство с Python для камрадов, переросших «язык A vs. язык B» и другие предрассудки","leadData":{"textHtml":"\u003Cp\u003EДля всех хабравчан, у которых возникло ощущение дежавю: Написать этот пост меня побудили статья \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F450474\u002F\"\u003E\"Введение в Python\"\u003C\u002Fa\u003E и комментарии к ней. К сожалению, качество этого \"введения\" кхм… не будем о грустном. Но ещё грустнее было наблюдать склоки в комментариях, из разряда \"C++ быстрее Python\", \"Rust ещё быстрее C++\", \"Python не нужен\" и т.д. Удивительно, что не вспомнили Ruby!\u003C\u002Fp\u003E\u003Cbr\u003E\r\n\u003Cp\u003EКак сказал Бьярн Страуструп,\u003C\u002Fp\u003E\u003Cbr\u003E\r\n\u003Cblockquote\u003E«Есть всего два типа языков программирования: те, на которые люди всё время ругаются, и те, которые никто не использует».\u003C\u002Fblockquote\u003E\u003Cp\u003EДобро пожаловать под кат всем, кто хотел бы познакомиться с Python, не опускаясь при этом до грязных ругательств!\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше →","image":null},"editorVersion":"1.0","postType":"article","postLabels":[],"author":{"scoreStats":{"score":68,"votesCount":105},"rating":0,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"117379","alias":"BasicWolf","fullname":"Zaur Nasibov","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F9b1\u002F0a3\u002F423\u002F9b10a3423277c579d7e66bc831f1e06b.jpg","speciality":"Software Engineer"},"statistics":{"commentsCount":145,"favoritesCount":338,"readingCount":39422,"score":78,"votesCount":88},"hubs":[{"relatedData":null,"id":"340","alias":"python","type":"collective","title":"Python","titleHtml":"Python","isProfiled":true},{"relatedData":null,"id":"359","alias":"programming","type":"collective","title":"Программирование","titleHtml":"Программирование","isProfiled":true},{"relatedData":null,"id":"21906","alias":"history","type":"collective","title":"История IT","titleHtml":"История IT","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Cp\u003EДля всех хабравчан, у которых возникло ощущение дежавю: Написать этот пост меня побудили статья \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F450474\u002F\"\u003E\"Введение в Python\"\u003C\u002Fa\u003E и комментарии к ней. К сожалению, качество этого \"введения\" кхм… не будем о грустном. Но ещё грустнее было наблюдать склоки в комментариях, из разряда \"C++ быстрее Python\", \"Rust ещё быстрее C++\", \"Python не нужен\" и т.д. Удивительно, что не вспомнили Ruby!\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EКак сказал Бьярн Страуструп,\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E«Есть всего два типа языков программирования: те, на которые люди всё время ругаются, и те, которые никто не использует».\u003C\u002Fblockquote\u003E\u003Cp\u003EДобро пожаловать под кат всем, кто хотел бы познакомиться с Python, не опускаясь при этом до грязных ругательств!\u003C\u002Fp\u003E\u003Ca name=\"habracut\"\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EУтро в горах Восточного Кавказа ознаменовалось воплями. Два молодых человека сидели на большом валуне и что-то рьяно обсуждали, активно жестикулируя. Через минуту они начали толкать друг друга, а потом сцепились и свалились с валуна в (как оказалось) куст крапивы. Видно этот куст рос там неспроста, — он сразу утихомирил драчунов и внёс перемирие в их неугасающий спор. Как вы, наверное догадались, одним из спорщиков был я, другим — мой лучший друг (привет, Quaker_t!), ну а предметом нашей светской беседы — \u003Cstrong\u003EVisual Basic vs. Delphi\u003C\u002Fstrong\u003E!\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EУзнаёте себя? Иногда мы превращаем любимые языки программирования в культ и готовы отстаивать его до последнего! Но годы идут и наступает момент, когда \"A vs. B\" из предмета споров перерастает в \"Мне комфортнее работать с А, но при необходимости я научусь работать с B, C, D, E \u003Cem\u003Eи вообще, с чем угодно\u003C\u002Fem\u003E\". Вот только когда мы сталкиваемся с новыми языками программирования, старые привычки и культура могут нас долго не отпускать.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EЯ хотел бы познакомить вас с Питоном и помочь перенести ваш опыт в новое русло. Как у любой технологии, у него есть свои сильные и слабые стороны. Python, как и C++, Rust, Ruby, JS, и все остальные — это инструмент. К любому инструменту прилагается инструкция и любым инструментом надо научиться пользоваться \u003Cem\u003Eправильно\u003C\u002Fem\u003E.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003E\"Автор, не пудри мозги, ты собирался нас с Питоном знакомить?\". Давайте знакомиться!\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EPython — динамический, высокоуровневый язык программирования общего назначения. Python — \u003Cstrong\u003Eзрелый\u003C\u002Fstrong\u003E язык программирования с богатой экосистемой и традициями. Хоть язык и увидел свет в 1991-м году, его современный облик начал формироваться в начале 2000-х. Python — \u003Cstrong\u003Eзаряженный\u003C\u002Fstrong\u003E язык, в его стандартной библиотеке есть решения на многие случаи жизни. Python — \u003Cstrong\u003Eпопулярный\u003C\u002Fstrong\u003E язык программирования: Dropbox, Reddit, Instagram, Disqus, YouTube, Netflix, чёрт побери, даже Eve Online и многие другие активно используют Python.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EВ чём причина такой популярности? С вашего позволения, изложу собственную версию.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EPython — \u003Cstrong\u003Eпростой\u003C\u002Fstrong\u003E язык программирования. Динамическая типизация. Сборщик мусора. Функции высшего порядка. Простой синтаксис для работы со словарями, множествами, кортежами и списками (в т.ч. для получения срезов). Питон отлично подходит для новичков: даёт возможность начать с процедурного программирования, потихоньку перейти к ООП и почуствовать вкус программирования функционального. Но эта простота — как верхушка айсберга. Стоит нырнуть в глубину, как натыкаешься на философию Питона — \u003Ca href=\"https:\u002F\u002Fwww.python.org\u002Fdev\u002Fpeps\u002Fpep-0020\u002F\"\u003EZen Of Python\u003C\u002Fa\u003E. Ныряешь ещё дальше — и попадаешь в свод чётких правил по оформлению кода — \u003Ca href=\"https:\u002F\u002Fwww.python.org\u002Fdev\u002Fpeps\u002Fpep-0008\u002F\"\u003EStyle Guide for Python Code\u003C\u002Fa\u003E. Погружаясь, программист постепенно вникает в понятие \"Python way\" или \"Pythonic\". В этот удивительный этап изучения языка, начинаешь понимать, почему хорошие программы на Питоне пишутся именно так, а не иначе. Почему язык эволюционировал именно в этом направлении, а не в другом. Питон не преуспел в скорости выполнения. Но он преуспел в важнейшем аспекте нашей работы — читабельности. \"Пишите код для людей, а не для машины\" — это основа из основ Питона.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EХороший код на Питоне выглядит красиво. А писать красивый код — чем не приятное занятие?\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003E\u003Cstrong\u003EСовет 0:\u003C\u002Fstrong\u003E \u003Cem\u003EПеред тем как читать дальше, пожалуйста, загляните в уголок \u003Ca href=\"https:\u002F\u002Fwww.python.org\u002Fdev\u002Fpeps\u002Fpep-0020\u002F\"\u003EДзена Питона\u003C\u002Fa\u003E. Язык зиждется на этих постулатах и наше общение будет намного приятнее, если и вы будете с ними знакомы.\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Ch3 id=\"kakoy-umnik-dodumalsya-do-otstupov\"\u003EКакой умник додумался до отступов?\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EПервым шоком для тех, кто никогда не видел код на Питоне, является обозначение тела инструкций отступами:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"python\"\u003Edef main():\n    ins = input('Please say something')\n\n    for w in ins.split(' '):\n        if w == 'hello':\n            print('world!')\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EВспоминаю вечера в общаге Питерского Политеха, когда мой сосед, \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fusers\u002Fvlk\u002F\" class=\"user_link\"\u003EVlK\u003C\u002Fa\u003E, с горящими глазами рассказывал, что ещё нового он откопал в Питоне. \"Тело инструкции отступами? Серьёзно?\" — была моя реакция. Действительно, для человека прошедшего от Visual Basic (\u003Ccode\u003Eif ... end if\u003C\u002Fcode\u003E) до C# (фигурные скобки), сквозь C, C++ и Java, подобный подход казался, мягко говоря, странным. \"Ты же форматируешь код отступами?\", спросил \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fusers\u002Fvlk\u002F\" class=\"user_link\"\u003EVlK\u003C\u002Fa\u003E. Конечно же я форматировал его. Точнее, за меня это делала спираченная Visual Studio. Она справлялась с этим чертовски хорошо. Я никогда не задумывался о форматировании и отступах — они появлялись в коде сами по себе и казались чем-то обыденным и привычным. Но крыть было нечем — код был всегда отформатирован отступами. \"Тогда зачем тебе фигурные скобки, если тело инструкций в любом случае будет сдвинуто вправо?\".\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EВ тот вечер я засел за Python. Оглядываясь назад, я могут точно сказать, что́ именно помогало быстро усваивать новый материал. Это был редактор кода. Под влиянием того же \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fusers\u002Fvlk\u002F\" class=\"user_link\"\u003EVlK\u003C\u002Fa\u003E, незадолго до вышеописанных событий, я перешёл с Windows на Ubuntu и Emacs в качестве редактора (на дворе 2007й год, до PyCharm, Atom, VS Code и прочих — ещё много лет). \"Ну вот, сейчас будет пиарить Emacs...\" — скажете вы. Совсем чуточку :) Традиционно, клавиша \u003Ccode\u003E&lt;tab\u003E\u003C\u002Fcode\u003E в Emacs не добавляет символов табуляции, а служит для выравнивания строки по правилам данного режима. Нажал \u003Ccode\u003E&lt;tab\u003E\u003C\u002Fcode\u003E — и строка кода сдвигается в следующее подходящее положение:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fp_\u002F8g\u002Fjm\u002Fp_8gjmuqid2ffw7ixile3wkjz74.gif\"\u002F\u003E\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EТаким образом вам никогда не приходится задумываться, правильно ли вы выровняли код.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003E\u003Cstrong\u003EСовет 1:\u003C\u002Fstrong\u003E \u003Cem\u003EПри знакомстве с Python используйте редактор, который возьмёт на себя заботу об отступах.\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EА знаете, какой побочный эффект у всего этого безобразия? Программист старается избегать длинных конструкций. Как только размер функции выходит за вертикальные границы экрана, становится сложнее различать, к какой же конструкции относится данный блок кода. И чем больше вложений, тем сложнее. В результате стараешься писать как можно лаконичнее, разбивая длинные тела функций, циклов, условных переходов и т.д.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Ch3 id=\"da-nu-vashu-dinamicheskuyu-tipizaciyu\"\u003EДа ну вашу динамическую типизацию\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EO, эта дискуссия существует почти столько же, сколько существует само понятие \"программирование\"! Динамическая типизация не плоха и не хороша. Динамическая типизация — это тоже наш инструмент. В Питоне динамическая типизация даёт огромную свободу действий. А там, где большая свобода действий — больше вероятность выстрелить себе в ногу.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EСтоит уточнить, что типизация в Питоне \u003Cstrong\u003Eстрогая\u003C\u002Fstrong\u003E и сложить число со строкой не получится:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"python\"\u003E1 + '1'\n\u003E\u003E\u003E TypeError: unsupported operand type(s) for +: 'int' and 'str'\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EПитон также проверяет сигнатуру функции при вызове и выбросит исключение, если сигнатура вызова не верна:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"python\"\u003Edef sum(x, y):\n    return x + y\n\nsum(10, 20, 30)\n\u003E\u003E\u003E TypeError: sum() takes 2 positional arguments but 3 were given\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EНо загружая скрипт, Python не скажет вам, что функция ожидает число а не строку, которую вы в неё передаёте. И узнаете вы об этом лишь во время исполнения:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"python\"\u003Edef sum(x, y):\n    return x + y\n\nsum(10, '10')\n\u003E\u003E\u003E TypeError: can only concatenate str (not \"int\") to str\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EТем сильнее вызов программисту, \u003Cem\u003Eособенно при написании больших проектов\u003C\u002Fem\u003E. Современный Питон ответил на этот вызов механизмом аннотаций и библиотекой типов, а сообщество разработало программы, \u003Ca href=\"http:\u002F\u002Fmypy-lang.org\u002F\"\u003Eвыполняющие статическую проверку типов\u003C\u002Fa\u003E. В результате программист узнаёт о подобных ошибках до выполнения программы:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"python\"\u003E# main.py:\ndef sum(x: int, y: int) -\u003E int:\n    return x + y\n\nsum(10, '10')\n\n$ mypy main.py\ntmp.py:5: error: Argument 2 to \"sum\" has incompatible type \"str\"; expected \"int\"\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EПитон не придаёт никакого значения аннотациям, хотя и сохраняет их в атрибуте \u003Ccode\u003E__annotations__\u003C\u002Fcode\u003E. Единственное условие — аннотации должны быть валидными значениями с точки зрения языка. С момента их появления в версии 3.0 (что было более десяти лет назад!), именно усилиями сообщества, аннотации стали использовать для типизированной маркировки переменных и аргументов.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cdiv class=\"spoiler\"\u003E\u003Cb class=\"spoiler_title\"\u003EЕщё один пример, посложнее.\u003C\u002Fb\u003E\u003Cdiv class=\"spoiler_text\"\u003E\u003Cpre\u003E\u003Ccode class=\"python\"\u003E# Для тех кто очень в теме, напоминаю: это пример :)\n\nfrom typing import TypeVar, Iterable\n\nNum = TypeVar('Num', int, float)\n\ndef sum(items: Iterable[Num]) -\u003E Num:\n    accum = 0\n    for item in items:\n        accum += item\n    return accum\n\nsum([1, 2, 3])\n\u003E\u003E\u003E 6\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003E\u003Cstrong\u003EСовет 2:\u003C\u002Fstrong\u003E \u003Cem\u003EНа практике больше всего динамическая типизация вызывает проблемы при чтении и отладке кода. Особенно если этот код писался без аннотаций и вам приходится тратить много времени на выяснение типов переменных. Вам не обязательно указывать и документировать типы всего и вся, но время, потраченное на детальное описание публичных интерфейсов и наиболее критических участков кода, воздастся сторицей!\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Ch3 id=\"krya-utinaya-tipizaciya\"\u003EКря! Утиная типизация\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EПорой знатоки Питона напускают на себя таинственный вид и говорят об \"Утиной типизации\".\u003Cbr\u002F\u003E\r\nУтиная типизация (Duck typing) — это применение \"утиного теста\" в программировании:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003EЕсли объект крякает как утка, летает как утка и ходит как утка, то скорее всего это утка.\u003C\u002Fblockquote\u003E\u003Cp\u003EРассмотрим пример:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"python\"\u003Eclass RpgCharacter:\n    def __init__(self, weapon)\n        self.weapon = weapon\n\n    def battle(self):\n        self.weapon.attack()\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EТут — классическое внедрение зависимости (dependency injection). Класс \u003Ccode\u003ERpgCharacter\u003C\u002Fcode\u003E получает объект \u003Ccode\u003Eweapon\u003C\u002Fcode\u003E в конструкторе и позже, в методе \u003Ccode\u003Ebattle()\u003C\u002Fcode\u003E вызывает \u003Ccode\u003Eweapon.attack()\u003C\u002Fcode\u003E. Но \u003Ccode\u003ERpgCharacter\u003C\u002Fcode\u003E не зависит от конкретной имплементации \u003Ccode\u003Eweapon\u003C\u002Fcode\u003E. Это может быть меч, BFG 9000, или кит с цветочным горшком, готовые приземлиться неприятелю на голову в любой момент. Важно, чтобы у объекта был метод \u003Ccode\u003Eattack()\u003C\u002Fcode\u003E, всё остальное Питон не интересует.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Fchandniblogs.wordpress.com\u002F2017\u002F04\u002F21\u002F454\u002F\"\u003E\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fl8\u002Fld\u002Fyz\u002Fl8ldyzcgtvlj3ifvbpnswr2k7ws.png\" data-width=\"400\"\u002F\u003E\u003C\u002Fdiv\u003E\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EСтрого говоря, утиная типизация не является чем-то уникальным. Она присутствует во всех (знакомых мне) динамических языках, реализующих ООП.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EЭто ещё один пример того, как внимательно приходится программировать в мире динамической типизации. Плохо назвали метод? Неоднозначно нарекли переменную? Ваш коллега, или вы сами, спустя эдак пол-годика, будете счастливы разгребать подобный код :)\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cdiv class=\"spoiler\"\u003E\u003Cb class=\"spoiler_title\"\u003EЧто было бы, используй мы условную Java?\u003C\u002Fb\u003E\u003Cdiv class=\"spoiler_text\"\u003E\u003Cpre\u003E\u003Ccode class=\"java\"\u003Einterface IWeapon {\n    void attack();\n}\n\npublic class Sword implements IWeapon {\n    public void attack() {\n        \u002F\u002F...\n    }\n}\n\npublic class RpgCharacter {\n    IWeapon weapon;\n\n    public RpgCharacter(IWeapon weapon) {\n       this.weapon = weapon;\n    }\n\n    public void battle() {\n        weapon.attack();\n    }\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EА была бы классическая статическая типизация, с проверкой соответствия типам на стадии компиляции. Цена — невозможность использовать объект, имеющий метод \u003Ccode\u003Eattack()\u003C\u002Fcode\u003E, но при этом не реализующий интерфейс \u003Ccode\u003EIWeapon\u003C\u002Fcode\u003E явным образом.\u003C\u002Fp\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003E\u003Cstrong\u003EСовет 3\u003C\u002Fstrong\u003E: \u003Cem\u003EПри желании вы можете описать интерфейс, построив собственный \u003Ca href=\"https:\u002F\u002Fdocs.python.org\u002F3\u002Flibrary\u002Fabc.html\"\u003Eабстрактный класс с методами и свойствами\u003C\u002Fa\u003E. А ещё лучше будет потратить время на тщательное тестирование и написание документации для себя и пользователей вашего кода.\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Ch3 id=\"procedurnyy-podhod-i-__specialnye_metody__\"\u003EПроцедурный подход и __специальные_методы__()\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EПитон — объектно-ориентированный язык и в корне иерархии наследования стоит класс \u003Ccode\u003Eobject\u003C\u002Fcode\u003E:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"python\"\u003Eisinstance('abc', object)\n\u003E\u003E\u003E True\n\nisinstance(10, object)\n\u003E\u003E\u003E True\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EНо там где в Java и C# используется \u003Ccode\u003Eobj.ToString()\u003C\u002Fcode\u003E, в Питоне будет вызов функции \u003Ccode\u003Estr(obj)\u003C\u002Fcode\u003E. Или например вместо \u003Ccode\u003EmyList.length\u003C\u002Fcode\u003E, в Питоне будет \u003Ccode\u003Elen(my_list)\u003C\u002Fcode\u003E. Создатель языка, Гвидо Ван Россум (Guido van Rossum), объяснил это следующим образом:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003EКогда я читаю код в котором говорится \u003Ccode\u003Elen(x)\u003C\u002Fcode\u003E, то знаю, что запрашивается длина чего-то. Это сразу говорит мне о том, что результатом будет целое число, а аргументом — какой-то контейнер. И наоборот, читая \u003Ccode\u003Ex.len()\u003C\u002Fcode\u003E, мне необходимо знать, что \u003Ccode\u003Ex\u003C\u002Fcode\u003E — это какой-то контейнер, имплементирующий определённый интерфейс или наследующий от класса, в котором имеется метод \u003Ccode\u003Elen()\u003C\u002Fcode\u003E. \u003Ca href=\"http:\u002F\u002Feffbot.org\u002Fpyfaq\u002Fwhy-does-python-use-methods-for-some-functionality-e-g-list-index-but-functions-for-other-e-g-len-list.htm\"\u003E[Источник]\u003C\u002Fa\u003E.\u003C\u002Fblockquote\u003E\u003Cp\u003EТем не менее внутри себя функции \u003Ccode\u003Elen()\u003C\u002Fcode\u003E, \u003Ccode\u003Estr()\u003C\u002Fcode\u003E и некоторые другие будут вызывать \u003Cstrong\u003Eопределённые\u003C\u002Fstrong\u003E методы объекта:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"python\"\u003Eclass User:\n    def __init__(self, name, last_name):\n        self.name = name\n        self.last_name = last_name\n\n    def __str__(self):\n        return f\"Honourable {self.name} {self.last_name}\"\n\nu = User('Alex', 'Black')\nlabel = str(u)\nprint(label)\n\u003E\u003E\u003E Honourable Alex Black\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EСпециальные методы также используются операторами языка, как математическими и булевыми, так и операторами цикла \u003Ccode\u003Efor ... in ...\u003C\u002Fcode\u003E, оператором контекста \u003Ccode\u003Ewith\u003C\u002Fcode\u003E, оператором индекса \u003Ccode\u003E[]\u003C\u002Fcode\u003E и т.д.\u003Cbr\u002F\u003E\r\nНапример, протокол итератора состоит из двух методов: \u003Ccode\u003E__iter__()\u003C\u002Fcode\u003E и \u003Ccode\u003E__next__()\u003C\u002Fcode\u003E:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"python\"\u003E# Никаких Iterable, IEnumerable, std::iterator и т.д.\nclass InfinitePositiveIntegers:\n    def __init__(self):\n        self.counter = 0\n\n    def __iter__(self):\n        \"\"\"Возвращает объект по которому будет проводиться итерация.\n\n        Вызывается встроенной фунцкией iter().\n        \"\"\"\n        return self\n\n    def __next__(self):\n        \"\"\"Возвращает элементы итерации.\n\n        Вызывается встроенной фунцкией next().\n        \"\"\"\n        self.counter += 1\n        return self.counter\n\nfor i in InfinitePositiveIntegers():\n    print(i)\n\u003E\u003E\u003E 1\n\u003E\u003E\u003E 2\n\u003E\u003E\u003E ...\n# чтобы остановить, нажмите Ctrl + C\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EХорошо, допустим специальные методы. Но почему они выглядят так вырвиглазно? Гвидо объяснил это тем, что имей они обычные имена без подчёркиваний, программисты, сами того не хотя, рано или поздно переопределяли бы их. Т.е. \u003Ccode\u003E__метод__()\u003C\u002Fcode\u003E это своебразная защита от дурака. Как показало время — защита эффективная :)\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003E\u003Cstrong\u003EСовет 4:\u003C\u002Fstrong\u003E \u003Cem\u003EВнимательно ознакомьтесь со \u003Ca href=\"https:\u002F\u002Fdocs.python.org\u002F3\u002Flibrary\u002Ffunctions.html\"\u003Eвстроенными функциями\u003C\u002Fa\u003E и \u003Ca href=\"https:\u002F\u002Fdocs.python.org\u002F3\u002Freference\u002Fdatamodel.html#special-method-names\"\u003Eспециальными методами объектов\u003C\u002Fa\u003E. Они являются неотъемлимой частью языка, без которой невозможно полноценно на нём разговаривать.\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Ch3 id=\"gde-inkapsulyaciya-gde-moy-private-gde-moya-skazochka\"\u003EГде инкапсуляция? Где мой private?! Где моя сказочка?!!\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EВ Питоне нет модификаторов доступа к атрибутам класса. Внутренности объектов открыты для доступа без каких-либо ограничений. Однако существует конвенция, по которой атрибуты с префиксом \u003Ccode\u003E_\u003C\u002Fcode\u003E считаются приватными, например:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"python\"\u003Eimport os\n\nclass MyFile:\n    # Поле считается приватным\n    _os_handle = None\n\n    def __init__(self, path: str):\n        self._open(path)\n\n    # Метод считается приватным\n    def _open(self, path):\n        # os.open() - *низкоуровневая* функция для открытия файлов.\n        # На практике используется встроенная функция open().\n        # Нам же os.open() отлично подойдёт для примера.\n        self._os_handle = os.open(path, os.O_RDWR | os.O_CREAT)\n\n    # А этот метод считается публичным\n    def close(self):\n        if self._os_handle is not None:\n            os.close(self._os_handle)\n\nf = MyFile('\u002Ftmp\u002Ffile.txt')\nprint(f._os_handle) # с доступом к \"приватному\" полю нет никаких проблем!\nf.close()\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EПочему?\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003EВ Питоне нет ничего приватного. Ни класс, ни его экземпляр не скроют от тебя того, что лежит внутри (благодаря чему возможна глубочайшая интроспекция). Питон доверяет тебе. Он как бы говорит \"Приятель, если ты хочешь пошарить по тёмным углам — нет проблем. Я верю, что на то имеются хорошие причины и надеюсь, что ты ничего не сломаешь.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ конце концов мы все здесь взрослые люди.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n — Karl Fast \u003Ca href=\"https:\u002F\u002Fmail.python.org\u002Fpipermail\u002Ftutor\u002F2003-October\u002F025932.html\"\u003E[Источник]\u003C\u002Fa\u003E.\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\n\u003Cdiv class=\"spoiler\"\u003E\u003Cb class=\"spoiler_title\"\u003EА как же избежать коллизии имён при наследовании?\u003C\u002Fb\u003E\u003Cdiv class=\"spoiler_text\"\u003E\u003Cp\u003EВ Питоне есть специальный механизм искажения (mangling) имени атрибутов, начинающихся с двойного подчёркивания и не заканчивающихся на двойное подчёркивание (\u003Ccode\u003E__my_attr\u003C\u002Fcode\u003E)! Сделано это для избежания коллизий имён при наследовании. Для вызова вне тела методов класса, Питон добавляет префикс \u003Ccode\u003E_ИмяКласса__атрибут\u003C\u002Fcode\u003E. Но для внутреннего доступа ничего не меняется:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"python\"\u003Eclass C:\n    def __init__(self):\n        self.__x = 10\n\n    def get_x(self):\n        return self.__x\n\nc = C()\nc.__x\n\u003E\u003E\u003E 'C' object has no attribute '__x'\n\nprint(c.get_x())\n\u003E\u003E\u003E 10\n\nprint(c._C__x)\n\u003E\u003E\u003E 10\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EДавайте рассмотрим практическое применение. Например, классу \u003Ccode\u003EFile\u003C\u002Fcode\u003E, который читает файлы из локальной файловой системы, мы хотим добавить способности кеширования. Наш коллега успел написать для этих целей класс-миксин. Но чтобы отгородить методы и атрибуты от \u003Cstrong\u003Eпотенциальных\u003C\u002Fstrong\u003E коллизий, коллега добавил к их именам префикс \u003Ccode\u003E__\u003C\u002Fcode\u003E:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"python\"\u003Eclass BaseFile:\n    def __init__(self, path):\n        self.path = path\n\nclass LocalMixin:\n    def read_from_local(self):\n        with open(self.path) as f:\n            return f.read()\n\nclass CachedMixin:\n    class CacheMissError(Exception):\n        pass\n\n    def __init__(self):\n        # Tepeрь, даже если в соседнем классе в цепочке наследования\n        # будет атрибут __cache, или метод __from_cache(),\n        # коллизии, а точнее переопределения не произойдёт!\n        self.__cache = {}\n\n    def __from_cache(self):\n        return self.__cache[self.path]\n\n    def read_from_cache(self):\n        try:\n            return self.__from_cache()\n        except KeyError as e:\n            raise self.CacheMissError() from e\n\n    def store_to_cache(self, data):\n        self.__cache[self.path] = data\n\nclass File(CachedMixin, LocalMixin, BaseFile):\n    def __init__(self, path):\n        CachedMixin.__init__(self)\n        BaseFile.__init__(self, path)\n\n    def read(self):\n        try:\n            return self.read_from_cache()\n        except CachedMixin.CacheMissError:\n            data = self.read_from_local()\n            self.store_to_cache(data)\n            return data\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EЕсли вам интересно взглянуть на имплементацию этого механизма в CPython, прошу в \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fpython\u002Fcpython\u002Fblob\u002F9a4135e939bc223f592045a38e0f927ba170da32\u002FPython\u002Fcompile.c#L219\"\u003EPython\u002Fcompile.c\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EНаконец, благодаря наличию свойств (properties) в языке, теряется смысл писать геттеры и сеттеры в стиле Java: \u003Ccode\u003EgetX(), setX()\u003C\u002Fcode\u003E. Например, в изначально написанном классе \u003Ccode\u003ECoordinates\u003C\u002Fcode\u003E,\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"python\"\u003Eclass Coordinates:\n    def __init__(self, x, y):\n        self.x = x\n        self.y = y\n\nc = Coordinates(10, 10)\nprint(c.x, c.y)\n\u003E\u003E\u003E (10, 10)\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003Eпонадобилось управлять доступом к атрибуту \u003Ccode\u003Ex\u003C\u002Fcode\u003E. Правильным подходом будет заменить его на \u003Ccode\u003Eproperty\u003C\u002Fcode\u003E, тем самым сохраняя контракт с внешним миром.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"python\"\u003Eclass Coordinates:\n    _x = 0\n\n    def __init__(self, x, y):\n        self.x = x\n        self.y = y\n\n    @property\n    def x(self):\n        return self._x\n\n    @x.setter\n    def x(self, val):\n        if val \u003E 10:\n            self._x = val\n        else:\n            raise ValueError('x should be greater than 10')\n\nc = Coordinates(20, 10)\nc.x = 5\n\u003E\u003E\u003E ValueError: x should be greater than 10\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003E\u003Cstrong\u003EСовет 5:\u003C\u002Fstrong\u003E \u003Cem\u003EКак и многое в Питоне, понятие о приватных полях и методах класса опирается на устоявшуюся конвенцию. Не обижайтесь на авторов библиотек, если \"всё перестало работать\" по той причите, что вы активно пользовались приватными полями их классов. В конце концов, мы все здесь взрослые люди :)\u003C\u002Fem\u003E.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Ch3 id=\"nemnogo-ob-isklyucheniyah\"\u003EНемного об исключениях\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EВ культуре Питона своеобразный подход к исключениям. Кроме привычного перехвата и обработки а-ля C++ \u002F Java, вам придётся столкнуться с использованием исключений в контексте\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\"Проще попросить прощения, чем спрашивать разрешение\" (Easier to ask for forgiveness, than permission — EAFP).\u003C\u002Fblockquote\u003E\u003Cp\u003EПерефразируя — не пиши лишнего \u003Ccode\u003Eif\u003C\u002Fcode\u003E, если в большинстве случаев исполнение пойдёт по данной ветке. Вместо этого оберни логику в \u003Ccode\u003Etry..except\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EПример: представим обработчик POST-запросов, создающей пользователя в условной базе данных. На входе функции — словарь (dictionary) типа ключ-значение:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"python\"\u003Edef create_user_handler(data: Dict[str, str]):\n    try:\n        database.user.persist(\n            username=data['username'],\n            password=data['password']\n        )\n    except KeyError:\n        print('There was a missing field in data passed for user creation')\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EМы не стали загрязнять код проверками \"содержится ли \u003Ccode\u003Eusername\u003C\u002Fcode\u003E или \u003Ccode\u003Epassword\u003C\u002Fcode\u003E в \u003Ccode\u003Edata\u003C\u002Fcode\u003E\". Мы ожидаем, что скорее всего они там будут. Мы не просим \"разрешения\" пользоваться этими полями, но \"просим прощения\" когда очередной кулхацкер запостит форму с отсутствующими данными.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cdiv class=\"spoiler\"\u003E\u003Cb class=\"spoiler_title\"\u003EТолько не доводите это до абсурда!\u003C\u002Fb\u003E\u003Cdiv class=\"spoiler_text\"\u003E\u003Cp\u003EНапример, вам хочется проверить, присутствуют ли фамилия пользователя в данных и при отсутствии установить её в пустое значение. \u003Ccode\u003Eif\u003C\u002Fcode\u003E здесь будет куда уместнее:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"python\"\u003Edef create_user_handler(data):\n    if 'last_name' not in data:\n        data['last_name'] = ''\n\n    try:\n        database.user.persist(\n            username=data['username'],\n            password=data['password'],\n            last_name=data['last_name']\n        )\n    except KeyError:\n        print('There was a missing field in data passed for user creation')\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003E\u003Cstrong\u003EErrors should never pass silently.\u003C\u002Fstrong\u003E — не замалчивайте исключения! У современного Питона есть замечательная консткрукция \u003Ccode\u003Eraise from\u003C\u002Fcode\u003E, позволяющая сохранить контекст цепочки исключений. Например:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"python\"\u003Eclass MyProductError(Exception):\n    def __init__(self):\n        super().__init__('There has been a terrible product error')\n\ndef calculate(x):\n    try:\n        return 10 \u002F x\n    except ZeroDivisionError as e:\n        raise MyProductError() from e\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EБез \u003Ccode\u003Eraise from e\u003C\u002Fcode\u003E цепочка исключений обрывается на \u003Ccode\u003EMyProductError\u003C\u002Fcode\u003E, и мы не сможем узнать, что именно было причиной этой ошибки. С \u003Ccode\u003Eraise from X\u003C\u002Fcode\u003E, причина (т.е. \u003Ccode\u003EX\u003C\u002Fcode\u003E) выбрасываемого исключения сохраняется в атрибуте \u003Ccode\u003E__cause__\u003C\u002Fcode\u003E:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"python\"\u003Etry:\n    calculate(0)\nexcept MyProductError as e:\n    print(e.__cause__)\n\n\u003E\u003E\u003E division by zero\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cdiv class=\"spoiler\"\u003E\u003Cb class=\"spoiler_title\"\u003EНо есть маленький нюанс в случае с итерацией: StopIteration\u003C\u002Fb\u003E\u003Cdiv class=\"spoiler_text\"\u003E\u003Cp\u003EВ случае с итерацией, выкидывание исключения \u003Ca href=\"https:\u002F\u002Fdocs.python.org\u002F3\u002Flibrary\u002Fstdtypes.html#iterator.__next__\"\u003EStopIteration\u003C\u002Fa\u003E является официальным способом сигнализировать о завершении итератора.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"python\"\u003Eclass PositiveIntegers:\n    def __init__(self, limit):\n        self.counter = 0\n        self.limit = limit\n\n    def __iter__(self):\n        return self\n\n    def __next__(self):\n        self.counter += 1\n\n        if self.counter == self.limit:\n            # никаких hasNext() или moveNext(),\n            # только исключения, только хардкор\n            raise StopIteration()\n\n        return self.counter\n\nfor i in PositiveIntegers(5):\n    print(i)\n\u003E 1\n\u003E 2\n\u003E 3\n\u003E 4\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003E\u003Cstrong\u003EСовет 6:\u003C\u002Fstrong\u003E \u003Cem\u003EМы платим за обработку исключения, лишь в исключительных ситуациях. Не пренебрегайте ими!\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Ch3 id=\"there-should-be-one---and-preferably-only-one---obvious-way-to-do-it\"\u003EThere should be one-- and preferably only one --obvious way to do it.\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003E\u003Ccode\u003Eswitch\u003C\u002Fcode\u003E или pattern matching? — используйте \u003Ccode\u003Eif\u003C\u002Fcode\u003E и словари. \u003Ccode\u003Edo-циклы\u003C\u002Fcode\u003E? — для этого есть \u003Ccode\u003Ewhile\u003C\u002Fcode\u003E и \u003Ccode\u003Efor\u003C\u002Fcode\u003E. \u003Ccode\u003Egoto\u003C\u002Fcode\u003E? Думаю вы и сами догадались. Это же относится и к некоторым техникам и шаблонам проектирования, которые кажутся сами собой разумеющимися в других языках. Самое удивительное, что нет никаких технических ограничений на их реализацию, просто \"у нас так не принято\".\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EНапример, в Питоне не часто встретишь паттерн \"Builder\". Вместо него используется возможность передавать и явным образом запрашивать именные аргументы функции. Вместо\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"python\"\u003Ehuman = HumanBuilder.withName(\"Alex\").withLastName(\"Black\").ofAge(20).withHobbies(['tennis', 'programming']).build()\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003Eбудет\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"python\"\u003Ehuman = Human(\n    name=\"Alex\"\n    last_name=\"Black\"\n    age=20\n    hobbies=['tennis', 'programming']\n)\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EВ стандартной библиотеке не используются цепочки методов для работы с \u003Cem\u003Eколлекциями\u003C\u002Fem\u003E. Помню, как коллега, пришедший из мира Kotlin, показывал мне код следующего толка (взято из \u003Ca href=\"https:\u002F\u002Fkotlinlang.org\u002Fdocs\u002Ftutorials\u002Fkotlin-for-py\u002Ffunctional-programming.html\"\u003Eофициальной документации\u003C\u002Fa\u003E по Котлину):\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"kotlin\"\u003Eval shortGreetings = people\n    .filter { it.name.length &lt; 10 }\n    .map { \"Hello, ${it.name}!\" }\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EВ Питоне \u003Ccode\u003Emap()\u003C\u002Fcode\u003E, \u003Ccode\u003Efilter()\u003C\u002Fcode\u003E и \u003Ca href=\"https:\u002F\u002Fdocs.python.org\u002F3\u002Flibrary\u002Fitertools.html\"\u003Eмногие другие\u003C\u002Fa\u003E — функции, а не методы коллекций. Переписав этот код один в один получится:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"python\"\u003Eshort_greetings = map(lambda h: f\"Hello, {h.name}\", filter(lambda h: len(h.name) &lt; 10, people))\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EПо-моему выглядит ужасно. Поэтому для длинных связок вроде \u003Ccode\u003E.takewhile().filter().map().reduce()\u003C\u002Fcode\u003E лучше использовать т.н. \u003Cem\u003Eвключения\u003C\u002Fem\u003E (comprehensions), или старые добрые циклы. Кстати, этот же пример на Котлине, приводится в виде соответствующего list comprehension. А на Питоне это выглядит так:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"python\"\u003Eshort_greetings = [\n    f\"Hello {h.name}\"\n    for h in people\n    if len(h.name) &lt; 10\n]\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cdiv class=\"spoiler\"\u003E\u003Cb class=\"spoiler_title\"\u003EДля тех же, кто скучает по цепочкам\u003C\u002Fb\u003E\u003Cdiv class=\"spoiler_text\"\u003E\u003Cp\u003EЕсть библиотеки, такие как \u003Ca href=\"https:\u002F\u002Fpypi.org\u002Fproject\u002Fpipe\u002F\"\u003EPipe\u003C\u002Fa\u003E или \u003Ca href=\"https:\u002F\u002Fpypi.org\u002Fproject\u002Fpy_linq\u002F\"\u003Epy_linq\u003C\u002Fa\u003E!\u003C\u002Fp\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EЦепочки методов используются там, где они эффективнee стандартных средств. Например в web-фреймворке Django, цепочки используются для построение объекта-запроса к БД:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"python\"\u003Equery = User.objects \\\n    .filter(last_visited__gte='2019-05-01') \\\n    .order_by('username') \\\n    .values('username', 'last_visited') \\\n    [:5]\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003E\u003Cstrong\u003EСовет 7:\u003C\u002Fstrong\u003E \u003Cem\u003EПеред тем, как сделать что-то очень знакомое из прошлого опыта, но не знакомое в Питоне, спросите себя, какое бы решение принял опытный питонист?\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Ch3 id=\"piton-medlennyy\"\u003EПитон медленный\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EДа.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EДа, если речь идёт о скорости исполнения по сравнению с статически типизированными и компилируемыми языками.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EНо вы, похоже, желаете развёрнутого ответа?\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EРеференсная имплементация Питона (CPython) — далеко не самая его эффективная имплементация. Одна из важных причин — желание разработчиков не усложнять её. И логика вполне понятна — не слишком заумный код означает меньше ошибок, лучшую возможность внесения изменений и в конце концов, большее число людей, которые этот код захотят прочесть, понять и дополнить.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EJake VanderPlas в своём блоге разбирает, \u003Ca href=\"https:\u002F\u002Fjakevdp.github.io\u002Fblog\u002F2014\u002F05\u002F09\u002Fwhy-python-is-slow\u002F\"\u003Eчто происходит у CPython под капотом\u003C\u002Fa\u003E при сложении двух переменных, содержащих целочисленные значения:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"python\"\u003Ea = 1\nb = 2\nc = a + b\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EДаже если не углубляться в дебри CPython, можно сказать, что для хранения переменных \u003Ccode\u003Ea\u003C\u002Fcode\u003E, \u003Ccode\u003Eb\u003C\u002Fcode\u003E и \u003Ccode\u003Ec\u003C\u002Fcode\u003E, интерпретатору придётся создать три объекта в куче (heap), в которых будут храниться тип и (указатели на) значения; повторно выяснять тип и значения при операции сложения, чтобы вызвать что-то вроде \u003Ccode\u003Ebinary_add&lt;int, int\u003E(a-\u003Eval, b-\u003Eval)\u003C\u002Fcode\u003E; записать результат в \u003Ccode\u003Ec\u003C\u002Fcode\u003E.\u003Cbr\u002F\u003E\r\nЭто чудовищно неэффективно по сравнению с аналогичной программой на C.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EДругая беда CPython — это т.н. Global Interpreter Lock (GIL). Этот механизм, по сути — булевое значение, огороженное мьютексом, используется для синхронизации выполнения байткода. GIL упрощает разработку кода, работающего в многопоточной среде: CPython не надо думать о синхронизации доступа к переменным или о взаимных блокировках (deadlocks). За это приходится платить тем, что лишь один поток получает доступ и \u003Cem\u003Eвыполняет байткод\u003C\u002Fem\u003E в данный момент времени:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Frw\u002Fod\u002Fif\u002Frwodifh_niof7jaf5bvmagg4ypy.gif\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003E\u003Cstrong\u003EUPD: \u003C\u002Fstrong\u003E Но это не значит, что программа на Питоне волшебным образом заработает в многопоточной среде! Код на Питоне не переносится в байткод один в один и нет никаких гарантий о совместимости байткода между версиями! Поэтому синхронизировать потоки в коде вам всё-таки придётся. К счастью и тут у Питона имеется богатый набор средств, например, позволяющих переключаться между многопоточной и многопроцессной моделью выполнения.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cdiv class=\"spoiler\"\u003E\u003Cb class=\"spoiler_title\"\u003EЕсли вам интересно, какие попытки предпринимаются для искоренения GIL\u003C\u002Fb\u003E\u003Cdiv class=\"spoiler_text\"\u003E\u003Cp\u003EРекомендую прочесть статью Anthony Shaw \"\u003Ca href=\"https:\u002F\u002Fhackernoon.com\u002Fhas-the-python-gil-been-slain-9440d28fa93d\"\u003EHas the Python GIL been slain?\u003C\u002Fa\u003E\".\u003C\u002Fp\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EКаковы выходы из ситуации?\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Col\u003E\r\n\u003Cli\u003EПитон отлично взаимодействует с нативными библиотеками. В простейшем варианте (\u003Ca href=\"https:\u002F\u002Fcffi.readthedocs.io\u002Fen\u002Flatest\u002F\"\u003ECFFI\u003C\u002Fa\u003E) нужно описать источник и сигнатуру функции в Питоне и вызывать её из динамической библиотеки. Для полноценной же работы с интерпретатором и окружением Питон предоставляет API для написания расширений (extensions) на C\u002FC++. А порывшись в Гугле, можно найти реализацию расширений на Rust, Go и даже \u003Ca href=\"https:\u002F\u002Fgithub.com\u002FJetBrains\u002Fkotlin-native\u002Ftree\u002Fmaster\u002Fsamples\u002Fpython_extension\"\u003EKotlin Native\u003C\u002Fa\u003E!\u003C\u002Fli\u003E\r\n\u003Cli\u003EИспользовать альтернативную реализацию Питона, например:\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fpypy.org\"\u003EPyPy\u003C\u002Fa\u003E, со встроенным JIT-компилятором. Прирост скорости будет меньше, чем при использовании нативного расширения, но может в конкретном случае большего и не будет нужно?\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fcython.org\"\u003ECython\u003C\u002Fa\u003E — транспайлер и компилятор надмножества языка Python в код на C.\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fironpython.net\"\u003EIronPython\u003C\u002Fa\u003E — имплементация, работающая поверх .NET framework.\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003C\u002Fli\u003E\r\n\u003C\u002Fol\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003E\u003Cstrong\u003EСовет 8:\u003C\u002Fstrong\u003E \u003Cem\u003EЕсли вам априори важна скорость выполнения, эффективнее будет использовать Питон как связку между нативными компонентами и не пытаться впихнуть невпихуемое. Если же вы работаете над приложением, в котором IO (сеть, БД, файловая система) является узким местом, то к тому моменту, когда скорость Питона перестанет вас устраивать, вы точно будете знать, как решить эту проблему :)\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Ch3 id=\"osnovnye-instrumenty\"\u003EОсновные инструменты\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EКак начинаются первые шаги в Питоне? Если у вас под рукой Linux или MacOS, то в 95% случаев Питон будет установлен из коробки. Если вы живёте на острие прогресса, то скорее всего это версия 3.х, а не отживающая свой век версия 2.7. Для товарищей на Windows всё чуточку сложнее. Вот несколько вариантов: использовать Docker, Windows Subsystem for Linux, Cygwin, наконец, официальный инсталлятор Питона для Винды.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003E\u003Cstrong\u003EСовет 9:\u003C\u002Fstrong\u003E \u003Cem\u003EПо возможности пользуйтесь свежей версией Питона. Язык развивается, каждая версия — это работа над ошибками и всегда что-то новое и полезное.\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EВы уже написали \"Hello world\" и он работает? Превосходно! Через пару дней вы займётесь machine learning-ом и вам понадобится какая-нибудь библиотека из каталога \u003Ca href=\"https:\u002F\u002Fpypi.org\"\u003EPython Package Index\u003C\u002Fa\u003E (PyPI).\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EЧтобы избежать конфликтов версий при установке пакетов (packages), в Питоне используются т.н. виртуальные окружения (virtual environments). Они позволяют частично изолировать среду путём создания директории, в которой будут находиться установленные пакеты. Там же будут лежать шелл-скрипты для управления этой средой. Установщик пакетов \u003Ccode\u003Epip\u003C\u002Fcode\u003E также идёт в комплекте. При активированной виртуальной среде \u003Ccode\u003Epip\u003C\u002Fcode\u003E будет устанавливать пакеты именно в неё. А объединяет всё это такие утилиты, как \u003Ccode\u003Epipenv\u003C\u002Fcode\u003E или \u003Ccode\u003Epoetry\u003C\u002Fcode\u003E — аналоги npm, bundler, cargo и т.п.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003E\u003Cstrong\u003EСовет 0xA:\u003C\u002Fstrong\u003E \u003Cem\u003EВаши главные помощники для управления зависимостями — это \u003Ccode\u003Epip\u003C\u002Fcode\u003E и \u003Ccode\u003Evirtualenv\u003C\u002Fcode\u003E. Всё остальное — это удобные, красивые, высокоуровневые обёртки. Ведь всё, что нужно нам и Питону — это правильный \u003Ccode\u003Esys.path\u003C\u002Fcode\u003E — список директорий, по которым пойдёт поиск модулей при их импорте.\u003C\u002Fem\u003E\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Ch3 id=\"chto-zhe-dalshe\"\u003EЧто же дальше?\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EВы уже прочли \u003Ca href=\"https:\u002F\u002Fdocs.python.org\u002F3\u002Ftutorial\u002F\"\u003Eофициальный туториал\u003C\u002Fa\u003E? Тогда не поленитесь взглянуть и на \u003Ca href=\"https:\u002F\u002Fdocs.python-guide.org\u002Fdev\u002Fvirtualenvs\u002F\"\u003Eтуториал по вышеописанным инструментам\u003C\u002Fa\u003E. И как в небезызвестной копипасте: \u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003EЗавтра ищешь в интернете книжку Dive into python...\u003C\u002Fblockquote\u003E\u003Cp\u003EУверен, что у вас скопилась гора идей и чешутся руки взяться за новый проект на Питоне. Ведь редкий день проходит на Хабре без появления статьи о применении Питона там где, казалось, ему совсем не место :)\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EДерзайте, камрады!\u003C\u002Fp\u003E\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"python"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F450724\u002Fefc5834501a3706637b2bd4e710c9ae1\u002F","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F450724\u002Fefc5834501a3706637b2bd4e710c9ae1\u002F?format=vk","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F450724\\\u002F\"},\"headline\":\"Знакомство с Python для камрадов, переросших «язык A vs. язык B» и другие предрассудки\",\"datePublished\":\"2019-05-21T18:01:38+03:00\",\"dateModified\":\"2019-05-26T11:54:36+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"Zaur Nasibov\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"Для всех хабравчан, у которых возникло ощущение дежавю: Написать этот пост меня побудили статья &quot;Введение в Python&quot; и комментарии к ней. К сожалению, качество эт...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F450724\\\u002F#post-content-body\",\"about\":[\"h_python\",\"h_programming\",\"h_history\",\"f_develop\",\"f_popsci\"],\"image\":[\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fp_\\\u002F8g\\\u002Fjm\\\u002Fp_8gjmuqid2ffw7ixile3wkjz74.gif\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fl8\\\u002Fld\\\u002Fyz\\\u002Fl8ldyzcgtvlj3ifvbpnswr2k7ws.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Frw\\\u002Fod\\\u002Fif\\\u002Frwodifh_niof7jaf5bvmagg4ypy.gif\"]}","metaDescription":"Для всех хабравчан, у которых возникло ощущение дежавю: Написать этот пост меня побудили статья &quot;Введение в Python&quot; и комментарии к ней. К сожалению, качество этого &quot;введения&quot; кхм… не будем о...","mainImageUrl":null,"amp":false},"polls":[],"commentsEnabled":true,"rulesRemindEnabled":false,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"isEditorial":false}},"articlesIds":{},"isLoading":false,"pagesCount":{},"route":{},"reasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"karma":{}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"career":{"seoLandings":[],"hubs":"python,programming,history"},"comments":{"articleComments":{},"searchCommentsResults":null,"previewComment":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"vacancies":{}},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0,"isLoadMore":false},"desktopState":{"desktopFl":null,"desktopHl":null,"isChecked":false,"isLoginDemanded":false},"dfp":{"slotsDict":{}},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":"true"},"flows":{"flows":[{"alias":"develop","id":1,"route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":6,"route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":2,"route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":3,"route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":4,"route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":7,"route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"infoPage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""},"searchQuery":null},"me":{"user":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"pinnedPost":{"pinnedPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":[],"similarListRefs":null},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"users":{"authorRefs":{},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"items":{},"pagesCache":{},"markedViewedSilently":{},"markedRead":{},"unreadCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null},"unviewedCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.c0af73e7.js" defer></script>



    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
</body>
</html>
